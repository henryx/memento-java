Memento backup system
----------------------

Link: https://bitbucket.org/ebianchi/mementobackup

Description:
------------

Memento is a backup system for remote computers. It is similar of other systems
(e.g. rsnapshot) but it has some differences:

 - It uses an agent for checking and downloading data.
 - It manages four distinct datasets (hour, day, week, month).
 - It saves space with hard link creation.
 - It saves data attribute (owner, group, permission, ACL) into database.

Licence:
--------

Memento is released under GPLv2 (see GPL.txt for details)

Dependencies:
-------------

 - Java 1.7;
 - PostgreSQL 9.x or more;

Installation:
-------------

 - Extract the archive into a directory.
 - Create an empty database in PostgreSQL.
 - Configure the [database] and the [general] sections into configuration file.
 - Create machine section into configuration file (see the example below).
 - Run

Client usage:
-------------

Client usage is:

    $ java -jar memento-client.jar -p <port>

Where `<port>` is port number which service listen requests from server

Server usage:
-------------

Server usage is:

    $ java -jar memento-server.jar --cfg=<cfgfile> -H # hour backup
    $ java -jar memento-server.jar --cfg=<cfgfile> -D # day backup
    $ java -jar memento-server.jar --cfg=<cfgfile> -W # week backup
    $ java -jar memento-server.jar --cfg=<cfgfile> -M # month backup

Where `<cfgfile>` is a file structured like the `backup.cfg` reported in the
archive. For other options, use `-h` switch. Some notes:

 - It is possible to have multiple configuration files, where each file has
   different parameters.
 - While [general] [dataset] and [database] sections are global, it is 
   possible to add any number of sections, one per server.

This is an example of configuration file:

    [general]
    repository = /var/backups/servers

    log_file = logfile.log
    log_level = INFO

    [database]
    host = localhost
    port = 5432
    user = postgres
    password = a_password
    dbname = a_database

    [dataset]
    hour = 24
    day = 6
    week = 4
    month = 12

    [server1]
    host = 192.168.1.100
    port = 4444
    path = /home
    store_acl = yes

    [server2]
    host = 192.168.1.101
    port = 4444
    path = /home/foo
    store_acl = no

Caveats:
--------

Because Memento use hard links to store its dataset, its use is guaranteed on
linux or unix environments.